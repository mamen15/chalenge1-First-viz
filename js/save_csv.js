// ////////////////////////////////////////////////////////////
// //////////////////////// Data //////////////////////////////
// ////////////////////////////////////////////////////////////

var studentsData = [
    // Student 1

    [
        {
            axis: "Score primaire",
            value: 8.75
        },
        {
            axis: "Score collégial",
            value: 16.41
        },
        {
            axis: "Score actuel",
            value: 16.41
        },
        {
            axis: "Score en mathématiques",
            value: 17.0
        }, {
            axis: "Score en langue arabe",
            value: 16.0
        }, {
            axis: "Score en première langue",
            value: 15.34
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.45
        },
        {
            axis: "Score collégial",
            value: 4.75
        },
        {
            axis: "Score actuel",
            value: 4.75
        },
        {
            axis: "Score en mathématiques",
            value: 5.0
        }, {
            axis: "Score en langue arabe",
            value: 7.0
        }, {
            axis: "Score en première langue",
            value: 6.0
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.3
        },
        {
            axis: "Score collégial",
            value: 8.8
        },
        {
            axis: "Score actuel",
            value: 0.0
        },
        {
            axis: "Score en mathématiques",
            value: 0.0
        }, {
            axis: "Score en langue arabe",
            value: 0.0
        }, {
            axis: "Score en première langue",
            value: 0.0
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.23
        },
        {
            axis: "Score collégial",
            value: 2.71
        },
        {
            axis: "Score actuel",
            value: 0.0
        },
        {
            axis: "Score en mathématiques",
            value: 0.0
        }, {
            axis: "Score en langue arabe",
            value: 0.0
        }, {
            axis: "Score en première langue",
            value: 0.0
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.33
        },
        {
            axis: "Score collégial",
            value: 8.19
        },
        {
            axis: "Score actuel",
            value: 0.0
        },
        {
            axis: "Score en mathématiques",
            value: 0.0
        }, {
            axis: "Score en langue arabe",
            value: 0.0
        }, {
            axis: "Score en première langue",
            value: 0.0
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.54
        },
        {
            axis: "Score collégial",
            value: 6.65
        },
        {
            axis: "Score actuel",
            value: 0.0
        },
        {
            axis: "Score en mathématiques",
            value: 0.0
        }, {
            axis: "Score en langue arabe",
            value: 0.0
        }, {
            axis: "Score en première langue",
            value: 0.0
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.03
        },
        {
            axis: "Score collégial",
            value: 6.5
        },
        {
            axis: "Score actuel",
            value: 6.5
        },
        {
            axis: "Score en mathématiques",
            value: 0.0
        }, {
            axis: "Score en langue arabe",
            value: 6.44
        }, {
            axis: "Score en première langue",
            value: 7.3
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.95
        },
        {
            axis: "Score collégial",
            value: 6.31
        },
        {
            axis: "Score actuel",
            value: 6.31
        },
        {
            axis: "Score en mathématiques",
            value: 5.33
        }, {
            axis: "Score en langue arabe",
            value: 4.75
        }, {
            axis: "Score en première langue",
            value: 4.72
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.21
        },
        {
            axis: "Score collégial",
            value: 7.02
        },
        {
            axis: "Score actuel",
            value: 7.02
        },
        {
            axis: "Score en mathématiques",
            value: 6.83
        }, {
            axis: "Score en langue arabe",
            value: 7.06
        }, {
            axis: "Score en première langue",
            value: 4.1
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.22
        },
        {
            axis: "Score collégial",
            value: 7.9
        },
        {
            axis: "Score actuel",
            value: 7.9
        },
        {
            axis: "Score en mathématiques",
            value: 3.67
        }, {
            axis: "Score en langue arabe",
            value: 9.12
        }, {
            axis: "Score en première langue",
            value: 5.7
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.1
        },
        {
            axis: "Score collégial",
            value: 6.42
        },
        {
            axis: "Score actuel",
            value: 6.42
        },
        {
            axis: "Score en mathématiques",
            value: 8.67
        }, {
            axis: "Score en langue arabe",
            value: 2.5
        }, {
            axis: "Score en première langue",
            value: 2.6
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.16
        },
        {
            axis: "Score collégial",
            value: 9.14
        },
        {
            axis: "Score actuel",
            value: 9.14
        },
        {
            axis: "Score en mathématiques",
            value: 6.33
        }, {
            axis: "Score en langue arabe",
            value: 9.13
        }, {
            axis: "Score en première langue",
            value: 8.7
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.85
        },
        {
            axis: "Score collégial",
            value: 9.67
        },
        {
            axis: "Score actuel",
            value: 9.67
        },
        {
            axis: "Score en mathématiques",
            value: 10.67
        }, {
            axis: "Score en langue arabe",
            value: 8.66
        }, {
            axis: "Score en première langue",
            value: 9.6
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.32
        },
        {
            axis: "Score collégial",
            value: 9.4
        },
        {
            axis: "Score actuel",
            value: 9.4
        },
        {
            axis: "Score en mathématiques",
            value: 8.67
        }, {
            axis: "Score en langue arabe",
            value: 8.84
        }, {
            axis: "Score en première langue",
            value: 8.9
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.86
        },
        {
            axis: "Score collégial",
            value: 9.3
        },
        {
            axis: "Score actuel",
            value: 9.3
        },
        {
            axis: "Score en mathématiques",
            value: 9.33
        }, {
            axis: "Score en langue arabe",
            value: 9.75
        }, {
            axis: "Score en première langue",
            value: 7.95
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.46
        },
        {
            axis: "Score collégial",
            value: 9.67
        },
        {
            axis: "Score actuel",
            value: 9.67
        },
        {
            axis: "Score en mathématiques",
            value: 7.0
        }, {
            axis: "Score en langue arabe",
            value: 10.41
        }, {
            axis: "Score en première langue",
            value: 5.1
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.41
        },
        {
            axis: "Score collégial",
            value: 9.9
        },
        {
            axis: "Score actuel",
            value: 9.9
        },
        {
            axis: "Score en mathématiques",
            value: 10.67
        }, {
            axis: "Score en langue arabe",
            value: 10.0
        }, {
            axis: "Score en première langue",
            value: 11.4
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.53
        },
        {
            axis: "Score collégial",
            value: 7.42
        },
        {
            axis: "Score actuel",
            value: 7.42
        },
        {
            axis: "Score en mathématiques",
            value: 5.67
        }, {
            axis: "Score en langue arabe",
            value: 10.69
        }, {
            axis: "Score en première langue",
            value: 5.9
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.43
        },
        {
            axis: "Score collégial",
            value: 8.78
        },
        {
            axis: "Score actuel",
            value: 8.78
        },
        {
            axis: "Score en mathématiques",
            value: 11.67
        }, {
            axis: "Score en langue arabe",
            value: 8.06
        }, {
            axis: "Score en première langue",
            value: 10.25
        }
    ],[
        {
            axis: "Score primaire",
            value: 8.05
        },
        {
            axis: "Score collégial",
            value: 8.72
        },
        {
            axis: "Score actuel",
            value: 8.72
        },
        {
            axis: "Score en mathématiques",
            value: 8.67
        }, {
            axis: "Score en langue arabe",
            value: 10.0
        }, {
            axis: "Score en première langue",
            value: 9.7
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.75
        },
        {
            axis: "Score collégial",
            value: 9.08
        },
        {
            axis: "Score actuel",
            value: 9.08
        },
        {
            axis: "Score en mathématiques",
            value: 11.0
        }, {
            axis: "Score en langue arabe",
            value: 10.0
        }, {
            axis: "Score en première langue",
            value: 9.6
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.57
        },
        {
            axis: "Score collégial",
            value: 8.49
        },
        {
            axis: "Score actuel",
            value: 8.49
        },
        {
            axis: "Score en mathématiques",
            value: 6.0
        }, {
            axis: "Score en langue arabe",
            value: 8.44
        }, {
            axis: "Score en première langue",
            value: 9.2
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.09
        },
        {
            axis: "Score collégial",
            value: 9.56
        },
        {
            axis: "Score actuel",
            value: 9.56
        },
        {
            axis: "Score en mathématiques",
            value: 11.33
        }, {
            axis: "Score en langue arabe",
            value: 9.19
        }, {
            axis: "Score en première langue",
            value: 10.1
        }
    ],[
        {
            axis: "Score primaire",
            value: 8.03
        },
        {
            axis: "Score collégial",
            value: 9.74
        },
        {
            axis: "Score actuel",
            value: 9.74
        },
        {
            axis: "Score en mathématiques",
            value: 9.5
        }, {
            axis: "Score en langue arabe",
            value: 10.38
        }, {
            axis: "Score en première langue",
            value: 11.2
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.27
        },
        {
            axis: "Score collégial",
            value: 9.84
        },
        {
            axis: "Score actuel",
            value: 9.84
        },
        {
            axis: "Score en mathématiques",
            value: 8.67
        }, {
            axis: "Score en langue arabe",
            value: 10.12
        }, {
            axis: "Score en première langue",
            value: 11.8
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.21
        },
        {
            axis: "Score collégial",
            value: 9.33
        },
        {
            axis: "Score actuel",
            value: 9.33
        },
        {
            axis: "Score en mathématiques",
            value: 8.33
        }, {
            axis: "Score en langue arabe",
            value: 8.62
        }, {
            axis: "Score en première langue",
            value: 11.4
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.56
        },
        {
            axis: "Score collégial",
            value: 8.7
        },
        {
            axis: "Score actuel",
            value: 8.7
        },
        {
            axis: "Score en mathématiques",
            value: 6.33
        }, {
            axis: "Score en langue arabe",
            value: 10.5
        }, {
            axis: "Score en première langue",
            value: 9.3
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.63
        },
        {
            axis: "Score collégial",
            value: 8.69
        },
        {
            axis: "Score actuel",
            value: 8.69
        },
        {
            axis: "Score en mathématiques",
            value: 9.75
        }, {
            axis: "Score en langue arabe",
            value: 7.0
        }, {
            axis: "Score en première langue",
            value: 5.0
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.91
        },
        {
            axis: "Score collégial",
            value: 9.72
        },
        {
            axis: "Score actuel",
            value: 9.72
        },
        {
            axis: "Score en mathématiques",
            value: 10.83
        }, {
            axis: "Score en langue arabe",
            value: 9.53
        }, {
            axis: "Score en première langue",
            value: 10.2
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.43
        },
        {
            axis: "Score collégial",
            value: 9.51
        },
        {
            axis: "Score actuel",
            value: 9.51
        },
        {
            axis: "Score en mathématiques",
            value: 8.0
        }, {
            axis: "Score en langue arabe",
            value: 11.09
        }, {
            axis: "Score en première langue",
            value: 10.6
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.98
        },
        {
            axis: "Score collégial",
            value: 8.8
        },
        {
            axis: "Score actuel",
            value: 8.8
        },
        {
            axis: "Score en mathématiques",
            value: 7.67
        }, {
            axis: "Score en langue arabe",
            value: 7.5
        }, {
            axis: "Score en première langue",
            value: 8.3
        }
    ],[
        {
            axis: "Score primaire",
            value: 7.32
        },
        {
            axis: "Score collégial",
            value: 9.96
        },
        {
            axis: "Score actuel",
            value: 9.96
        },
        {
            axis: "Score en mathématiques",
            value: 7.33
        }, {
            axis: "Score en langue arabe",
            value: 10.44
        }, {
            axis: "Score en première langue",
            value: 11.4
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.72
        },
        {
            axis: "Score collégial",
            value: 8.07
        },
        {
            axis: "Score actuel",
            value: 8.07
        },
        {
            axis: "Score en mathématiques",
            value: 8.17
        }, {
            axis: "Score en langue arabe",
            value: 7.53
        }, {
            axis: "Score en première langue",
            value: 7.9
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.91
        },
        {
            axis: "Score collégial",
            value: 8.56
        },
        {
            axis: "Score actuel",
            value: 8.56
        },
        {
            axis: "Score en mathématiques",
            value: 7.83
        }, {
            axis: "Score en langue arabe",
            value: 9.75
        }, {
            axis: "Score en première langue",
            value: 10.6
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.47
        },
        {
            axis: "Score collégial",
            value: 9.05
        },
        {
            axis: "Score actuel",
            value: 9.05
        },
        {
            axis: "Score en mathématiques",
            value: 8.17
        }, {
            axis: "Score en langue arabe",
            value: 9.81
        }, {
            axis: "Score en première langue",
            value: 11.3
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.42
        },
        {
            axis: "Score collégial",
            value: 8.85
        },
        {
            axis: "Score actuel",
            value: 5.85
        },
        {
            axis: "Score en mathématiques",
            value: 6.67
        }, {
            axis: "Score en langue arabe",
            value: 10.88
        }, {
            axis: "Score en première langue",
            value: 9.7
        }
    ],[
        {
            axis: "Score primaire",
            value: 9.41
        },
        {
            axis: "Score collégial",
            value: 9.41
        },
        {
            axis: "Score actuel",
            value: 8.0
        },
        {
            axis: "Score en mathématiques",
            value: 10.0
        }, {
            axis: "Score en langue arabe",
            value: 9.5
        }, {
            axis: "Score en première langue",
            value: 7.25
        }
    ],[
        {
            axis: "Score primaire",
            value: 6.5
        },
        {
            axis: "Score collégial",
            value: 9.87
        },
        {
            axis: "Score actuel",
            value: 9.87
        },
        {
            axis: "Score en mathématiques",
            value: 7.67
        }, {
            axis: "Score en langue arabe",
            value: 10.12
        }, {
            axis: "Score en première langue",
            value: 10.2
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.88
        },
        {
            axis: "Score collégial",
            value: 9.98
        },
        {
            axis: "Score actuel",
            value: 8.98
        },
        {
            axis: "Score en mathématiques",
            value: 7.67
        }, {
            axis: "Score en langue arabe",
            value: 7.69
        }, {
            axis: "Score en première langue",
            value: 8.8
        }
    ],[
        {
            axis: "Score primaire",
            value: 5.77
        },
        {
            axis: "Score collégial",
            value: 8.8
        },
        {
            axis: "Score actuel",
            value: 8.8
        },
        {
            axis: "Score en mathématiques",
            value: 8.33
        }, {
            axis: "Score en langue arabe",
            value: 8.25
        }, {
            axis: "Score en première langue",
            value: 8.0
        }
    ]
];


// Chart dimensions
var width = 500;
var height = 500;

// Radius of the spider chart
var radius = Math.min(width, height) / 2;

// Function to create spider chart
function createSpiderChart(data) {
    var svg = d3.select(".radarChart")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    // Extract axis names from the first student's data
    var axisNames = [ "Score primaire",
    "Score collégial",
    "Score actuel",
    "Score en mathématiques",
    "Score en langue arabe",
    "Score en première langue",];
    console.log(axisNames)
    // Scale for the radius
    var scale = d3.scaleLinear()
        .domain([0, 20])  // Assuming the maximum score is 20, adjust as needed
        .range([0, radius]);

    // Draw the axes
    var axis = svg.selectAll(".axis")
        .data(axisNames)
        .enter().append("g")
        .attr("class", "axis");

    axis.append("line")
        .attr("x1", 0)
        .attr("y1", 0)
        .attr("x2", function(d, i) { return scale(20) * Math.cos(Math.PI * 2 * i / axisNames.length); })
        .attr("y2", function(d, i) { return scale(20) * Math.sin(Math.PI * 2 * i / axisNames.length); })
        .attr("class", "line");

    // Draw the labels
    axis.append("text")
        .attr("class", "legend")
        .style("font-size", "14px")
        .attr("dy", "0.35em")
        .attr("x", function(d, i) { return scale(20 * 1.1) * Math.cos(Math.PI * 2 * i / axisNames.length); })
        .attr("y", function(d, i) { return scale(20 * 1.1) * Math.sin(Math.PI * 2 * i / axisNames.length); })
        .text(function(d) { return d; });

    // Function to create paths for data points
    var radarLine = d3.lineRadial()
        .curve(d3.curveLinearClosed)
        .radius(function(d) { return scale(d.value); })
        .angle(function(d, i) { return i * 2 * Math.PI / axisNames.length; });

    // Draw the radar chart paths
    svg.selectAll(".radarArea")
        .data(data)
        .enter().append("path")
        .attr("class", "radarArea")
        .attr("d", radarLine)
        .attr("fill", "rgba(255, 0, 0, 0.5)");  // Adjust the fill color and opacity as needed
}

// Populate the dropdown menu with student names
var dropdown = d3.select("#student-dropdown");

dropdown.selectAll("option")
    .data(studentsData)
    .enter().append("option")
    .attr("value", function(d, i) { return i; })
    .text(function(d, i) { return "Student " + (i + 1); });

// Event listener for dropdown change
dropdown.on("change", function() {
    var selectedStudentIndex = +dropdown.property("value");
    var selectedStudentData = studentsData[selectedStudentIndex];
    // Clear the previous chart if exists
    d3.select(".radarChart").selectAll("*").remove();
    // Create the spider chart for the selected student
    createSpiderChart(selectedStudentData);
});

